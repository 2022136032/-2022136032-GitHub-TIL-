import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return const MaterialApp(
      home: GridXPatternScreen(),
    );
  }
}

class GridXPatternScreen extends StatefulWidget {
  const GridXPatternScreen({super.key});

  @override
  State<GridXPatternScreen> createState() => _GridXPatternScreenState();
}

class _GridXPatternScreenState extends State<GridXPatternScreen> {
  // N x N Í≤©ÏûêÏùò ÌÅ¨Í∏∞Î•º ÎÇòÌÉÄÎÇ¥Îäî Î≥ÄÏàò.
  int _n = 5; 
  final TextEditingController _nController = TextEditingController(text: '5');
  static const double _blockSize = 64.0;
  // Î∏îÎ°ù Í∞Ñ Í∞ÑÍ≤© ÏÑ§Ï†ï
  static const double _spacing = 2.0; 

  @override
  void dispose() {
    _nController.dispose();
    super.dispose();
  }
  bool _isXPattern(int row, int col, int n) {
    return row == col || row + col == n - 1;
  }
  Widget _buildGridBlock(int index) {
    final int row = index ~/ _n;
    final int col = index % _n;
    final bool isFilled = _isXPattern(row, col, _n);
    final Color color = isFilled ? Colors.blue : Colors.transparent;
    
    return Container(
      width: _blockSize,
      height: _blockSize,
      decoration: BoxDecoration(
        color: color,
        // Í∞Å Î∏îÎ°ùÏùò ÎÇ¥Î∂Ä ÌÖåÎëêÎ¶¨Îäî Ïú†ÏßÄ
        border: Border.all(
          color: Colors.grey.shade400, 
          width: 1.0,                   
        ),
      ),
    );
  }
  void _updateNValue(String value) {
    final int? newN = int.tryParse(value);
    if (newN != null && newN > 0) {
      setState(() {
        _n = newN;
      });
    }
  }

  @override
  Widget build(BuildContext context) {
    final double totalGridSize = (_n * _blockSize) + ((_n - 1) * _spacing);

    return Scaffold(
      appBar: AppBar(
        title: const Text('Flutter N x N Grid without Outer Border'),
      ),
      body: Center(
        child: SingleChildScrollView(
          padding: const EdgeInsets.all(20.0),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.center,
            children: <Widget>[
              // üî¢ N Í∞í ÏûÖÎ†•
              SizedBox(
                width: 150,
                child: TextField(
                  controller: _nController,
                  keyboardType: TextInputType.number,
                  decoration: const InputDecoration(
                    labelText: 'N (Í≤©Ïûê ÌÅ¨Í∏∞)',
                    border: OutlineInputBorder(),
                  ),
                  onSubmitted: _updateNValue,
                  onChanged: _updateNValue,
                ),
              ),
              const SizedBox(height: 30),
              Container(
                width: totalGridSize,
                height: totalGridSize,
                child: GridView.builder(
                  physics: const NeverScrollableScrollPhysics(), 
                  itemCount: _n * _n,
                  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
                    crossAxisCount: _n,
                    crossAxisSpacing: _spacing, 
                    mainAxisSpacing: _spacing,   
                    childAspectRatio: 1.0, 
                  ),
                  itemBuilder: (context, index) {
                    return _buildGridBlock(index); 
                  },
                ),
              ),
              const SizedBox(height: 20),
              Text(
                '$_n x $_n Í≤©Ïûê (Ïô∏Í≥ΩÏÑ† ÏóÜÏùå, ÎÇ¥Î∂Ä Î∏îÎ°ù Í∞Ñ Í∞ÑÍ≤© $_spacing)',
                style: const TextStyle(fontSize: 16),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
